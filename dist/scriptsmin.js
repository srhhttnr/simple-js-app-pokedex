let pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&"name"in t?e.push(t):console.log("pokemon is not correct")}function n(){return e}function i(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){t({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})}function l(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.frontImageUrl=t.sprites.front_default,e.backImageUrl=t.sprites.back_default,e.height=t.height,e.weight=t.weight,e.types=t.types,e.abilities=t.abilities}).catch(function(e){console.error(e)})}function a(e){pokemonRepository.loadDetails(e).then(function(){let t=document.querySelector(".pokemon-list");t.classList.add("list-group");let n=document.createElement("li");n.classList.add("list-group-item");let i=document.createElement("div"),l=document.createElement("button");l.innerText=e.name,l.classList.add("btn-lg","btn-primary","btn","col"),l.setAttribute("data-target","#modal"),l.setAttribute("data-toggle","modal");let a=document.createElement("div"),o=document.createElement("img");o.classList.add("img-fluid","row","mx-auto"),o.src=e.frontImageUrl,o.alt=`Front view of ${e.name}`,i.appendChild(l),a.appendChild(o),n.appendChild(i),n.appendChild(a),t.appendChild(n),l.addEventListener("click",function(){r(e)})})}let o=document.querySelector(".modal");function r(e){pokemonRepository.loadDetails(e).then(function(){let s=document.querySelector(".modal-content"),c=document.querySelector(".modal-header"),p=document.querySelector(".modal-title"),m=document.querySelector(".modal-body"),u=document.querySelector(".modal-footer");p.innerHTML="",m.innerHTML="";let h=document.querySelector(".close"),f=document.createElement("h1");f.innerHTML=e.name,f.classList.add("text-center");let g=document.createElement("img");g.classList.add("img-fluid","modal-image"),g.src=e.frontImageUrl,g.alt=`Front view of ${e.name}`;let y=document.createElement("img");y.classList.add("modal-image"),y.src=e.backImageUrl,y.alt,e.name;let L=document.createElement("p");L.innerText=`Height: ${e.height} m`;let E=document.createElement("p");E.innerText=`Weight: ${e.weight} kg`;let b=[];e.types.forEach(function(e){b.push(e.type.name)});let k=document.createElement("p");k.innerText=`Type: ${b.join(", ")}`;let C=[];e.abilities.forEach(function(e){C.push(e.ability.name)});let v=document.createElement("p");return v.innerText=`Abilities: ${C.join(", ")}`,p.appendChild(f),c.appendChild(p),m.appendChild(g),m.appendChild(y),m.appendChild(L),m.appendChild(E),m.appendChild(k),m.appendChild(v),u.appendChild(h),s.appendChild(c),s.appendChild(m),s.appendChild(u),o.appendChild(s),o.classList.add("is-visible"),o.addEventListener("click",e=>{e.target===o&&d()}),window.addEventListener("keydown",e=>{"Escape"===e.key&&o.classList.contains("is-visible")&&d()}),{getAll:n,add:t,showModal:r,addListItem:a,loadList:i,loadDetails:l}})}function d(){o.classList.remove("is-visible")}return{getAll:n,add:t,showModal:r,addListItem:a,loadList:i,loadDetails:l}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});